{% load wagtailcore_tags wagtailimages_tags %}

<article class="group bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden h-full flex flex-col hover:scale-[1.03]">
    {% if event.image %}
        {% image event.image fill-400x300 as event_img %}
        <div class="relative overflow-hidden">
            <img src="{{ event_img.url }}" alt="{{ event.title }}"
                 class="w-full h-56 object-cover transform group-hover:scale-105 transition-transform duration-500">
            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent h-24"></div>
            <time class="absolute bottom-4 left-4 text-white font-medium px-3 py-1 bg-[var(--primary-color)]/80 rounded-full text-sm">
                {{ event.date|date:"d F Y" }}
            </time>
            <div class="absolute bottom-4 right-4 text-white font-medium px-3 py-1 bg-[var(--primary-color)]/80 rounded-full text-sm">
                {{ event.get_ville_display }}
            </div>
        </div>
    {% endif %}
    <div class="p-6 flex flex-col flex-grow">
        <div class="flex-grow">
            <h3 class="text-xl font-bold mb-2 group-hover:text-[var(--primary-color)] transition-colors">
                {{ event.title }}
            </h3>
            <div class="text-gray-600 line-clamp-3">{{ event.subtitle|default:event.content|richtext }}</div>
        </div>
        <a href="{{ event.url }}" class="btn-outline mt-2">
            En savoir plus
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
        </a>
    </div>
</article>